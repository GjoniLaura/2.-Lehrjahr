@page "/"
@using Microsoft.EntityFrameworkCore;
@using TimeTable.DatabaseConnection;
@inject IDbContextFactory<TimeTableContext> DbFactory

<PageTitle>Index</PageTitle>

<button @onclick="AddTeacherMethod">Add Teacher</button>
@foreach(Teacher t in techers)
{
	@foreach(Subject s in t.TeachedSubject)
	{
				<h1>@s._premises</h1>
	}
}

@code{
	Subject k1 = new Subject("string1", "string2", "string3");
	List<Subject> sub = new List<Subject>();
	List<Teacher> techers = new List<Teacher>();

	protected override async Task OnInitializedAsync()
	{
		sub.Add(k1);
		await base.OnInitializedAsync();


		using var context = DbFactory.CreateDbContext();
		context.InitializeDatabase();

		techers = TeacherDatabaseConnection.getTeacher();

		TeacherDatabaseConnection.setTeacher("fda","hdfs",true, sub, true, 4);

		techers = TeacherDatabaseConnection.getTeacher();
	}
	private void AddTeacherMethod()
	{
		TeacherDatabaseConnection.setTeacher("fda", "hdfs", true, sub, true, 4);
	}

}